{"remainingRequest":"C:\\Users\\ddung\\Desktop\\booking-vue\\booking\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ddung\\Desktop\\booking-vue\\booking\\src\\components\\Profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ddung\\Desktop\\booking-vue\\booking\\src\\components\\Profile.vue","mtime":1594572497771},{"path":"C:\\Users\\ddung\\Desktop\\booking-vue\\booking\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ddung\\Desktop\\booking-vue\\booking\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ddung\\Desktop\\booking-vue\\booking\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\ddung\\Desktop\\booking-vue\\booking\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\ddung\\Desktop\\booking-vue\\booking\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ddung\\Desktop\\booking-vue\\booking\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJwcm9maWxlIiwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgdXNlcjogew0KICAgICAgICB1c2VySWQ6ICIiLA0KICAgICAgICB1c2VybmFtZTogIiIsDQogICAgICAgIGZpcnN0TmFtZTogIiIsDQogICAgICAgIGxhc3ROYW1lOiAiIiwNCiAgICAgICAgYWdlOiAwLA0KICAgICAgICBhZGRyZXNzOiAiIiwNCiAgICAgICAgZW1haWw6ICIiLA0KICAgICAgICBwaG9uZTogIiIsDQogICAgICAgIGJpcnRoRGF5OiAiIiwNCiAgICAgICAgZGVzY3JpcHRpb246ICIiLA0KICAgICAgICBoYXNoU2VjcmV0OiAiIiwNCiAgICAgICAgdG1uQ29kZTogIiIsDQogICAgICAgIGF2YXRhcjogIiINCiAgICAgIH0sDQogICAgICByb2xlTmFtZTogbG9jYWxTdG9yYWdlLmdldEl0ZW0oInJvbGVOYW1lIiksDQogICAgICBzdGVwcGVyOiAxLA0KICAgICAgY3VycmVudFBhc3N3b3JkOiAiIiwNCiAgICAgIG5ld1Bhc3N3b3JkOiAiIiwNCiAgICAgIGNvbmZpcm1QYXNzd29yZDogIiINCiAgICB9Ow0KICB9LA0KICBiZWZvcmVNb3VudDogZnVuY3Rpb24oKSB7DQogICAgbGV0IHZtID0gdGhpczsNCiAgICBsZXQgdXNlcklkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJJZCIpOw0KICAgIHZtLiRheGlvcw0KICAgICAgLmdldChgL2Jvb2tpbmcvYXBpL3YxL3VzZXIvYCArIHVzZXJJZCwgew0KICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgQXV0aG9yaXphdGlvbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oImp3dFRva2VuIikNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHsNCiAgICAgICAgICB2bS51c2VyID0gcmVzcG9uc2UuZGF0YTsNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIC5jYXRjaChlID0+IHsNCiAgICAgICAgdm0uZXJyb3JzLnB1c2goZSk7DQogICAgICB9KTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGFzeW5jIGhhbmRsZUZpbGVVcGxvYWQoKSB7DQogICAgICBsZXQgdm0gPSB0aGlzOw0KICAgICAgY29uc3QgaW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjZmlsZXMiKS5maWxlc1swXTsNCiAgICAgIGxldCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOw0KICAgICAgZm9ybURhdGEuYXBwZW5kKCJmaWxlIiwgaW1hZ2UpOw0KDQogICAgICBhd2FpdCB2bS4kYXhpb3MNCiAgICAgICAgLnBvc3QoDQogICAgICAgICAgYC9ib29raW5nL2FwaS92MS91c2VyL2AgKw0KICAgICAgICAgICAgdm0udXNlci51c2VySWQgKw0KICAgICAgICAgICAgIi9hdmF0YXIiLA0KICAgICAgICAgIGZvcm1EYXRhLA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oImp3dFRva2VuIiksDQogICAgICAgICAgICAgICJDb250ZW50LVR5cGUiOiAibXVsdGlwYXJ0L2Zvcm0tZGF0YSINCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICkNCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOw0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2coZSk7DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgdXBkYXRlVXNlcigpIHsNCiAgICAgIGxldCB2bSA9IHRoaXM7DQogICAgICBpZiAodm0uY3VycmVudFBhc3N3b3JkICYmIHZtLm5ld1Bhc3N3b3JkICYmIHZtLmNvbmZpcm1QYXNzd29yZCkgew0KICAgICAgICBpZiAodm0ubmV3UGFzc3dvcmQgPT09IHZtLmNvbmZpcm1QYXNzd29yZCkgew0KICAgICAgICAgIGxldCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOw0KICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgiY3VycmVudFBhc3N3b3JkIiwgdm0uY3VycmVudFBhc3N3b3JkKTsNCiAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoIm5ld1Bhc3N3b3JkIiwgdm0ubmV3UGFzc3dvcmQpOw0KICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgiY29uZmlybVBhc3N3b3JkIiwgdm0uY29uZmlybVBhc3N3b3JkKTsNCiAgICAgICAgICBsZXQgdXNlcklkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJJZCIpOw0KICAgICAgICAgIHZtLiRheGlvcw0KICAgICAgICAgICAgLnBvc3QoDQogICAgICAgICAgICAgIGAvYm9va2luZy9hcGkvdjEvdXNlci9gICsgdXNlcklkLA0KICAgICAgICAgICAgICBmb3JtRGF0YSwNCiAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJqd3RUb2tlbiIpLA0KICAgICAgICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJtdWx0aXBhcnQvZm9ybS1kYXRhIg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgKQ0KICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS51c2VySWQpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgiQ2hhbmdlIFBhc3N3b3JkIHN1Y2Nlc3NmdWxseSIpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGUgPT4gew0KICAgICAgICAgICAgICB2bS5lcnJvcnMucHVzaChlKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9DQogICAgICB2bS4kYXhpb3MNCiAgICAgICAgLnB1dChgL2Jvb2tpbmcvYXBpL3YxL3VzZXJgLCB2bS51c2VyLCB7DQogICAgICAgICAgaGVhZGVyczogew0KICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oImp3dFRva2VuIikNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS51c2VySWQpIHsNCiAgICAgICAgICAgIGFsZXJ0KCJVcGRhdGUgc3VjY2Vzc2Z1bGx5Iik7DQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goZSA9PiB7DQogICAgICAgICAgdm0uZXJyb3JzLnB1c2goZSk7DQogICAgICAgIH0pOw0KICAgIH0NCiAgfQ0KfTsNCg=="},{"version":3,"sources":["Profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Profile.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <v-container fluid>\r\n    <v-stepper v-model=\"stepper\">\r\n      <v-stepper-header>\r\n        <v-stepper-step :complete=\"stepper > 1\" step=\"1\">Account</v-stepper-step>\r\n        <v-divider></v-divider>\r\n        <v-stepper-step v-if=\"roleName == 'ROLE_HOST'\" :complete=\"stepper > 2\" step=\"2\">Payments</v-stepper-step>\r\n        <v-divider></v-divider>\r\n        <v-stepper-step v-if=\"roleName == 'ROLE_HOST'\" step=\"3\">Change Password</v-stepper-step>\r\n        <v-stepper-step v-else step=\"2\">Change Password</v-stepper-step>\r\n      </v-stepper-header>\r\n      <v-stepper-items>\r\n        <v-stepper-content step=\"1\">\r\n          <v-container>\r\n            <v-card max-width=\"300\" outlined style=\"margin-bottom: 20px;\" class=\"d-flex\">\r\n              <v-list-item-avatar tile size=\"150\" color=\"grey\" style=\"margin: 10px;\">\r\n                <v-img :src=\"user.avatar\"></v-img>\r\n              </v-list-item-avatar>\r\n              <v-card-actions class=\"d-flex justify-end flex-column\">\r\n                <label\r\n                  for=\"files\"\r\n                  style=\"padding: 5px 10px; border-radius: 5px; cursor: pointer; color: white; font-size: 14px; margin-bottom: 2px;\"\r\n                  class=\"primary\"\r\n                >Change Avatar</label>\r\n                <input\r\n                  type=\"file\"\r\n                  id=\"files\"\r\n                  ref=\"files\"\r\n                  label=\"Files\"\r\n                  accept=\"image/*\"\r\n                  style=\"display: none;\"\r\n                  required\r\n                  @change=\"handleFileUpload\"\r\n                />\r\n              </v-card-actions>\r\n            </v-card>\r\n            <v-text-field\r\n              v-model=\"user.firstName\"\r\n              label=\"First Name\"\r\n              placeholder=\"First Name\"\r\n              outlined\r\n            ></v-text-field>\r\n            <v-text-field\r\n              v-model=\"user.lastName\"\r\n              label=\"Last Name\"\r\n              placeholder=\"Last Name\"\r\n              outlined\r\n            ></v-text-field>\r\n            <v-text-field v-model=\"user.email\" label=\"Email\" placeholder=\"Email\" outlined></v-text-field>\r\n            <v-text-field v-model=\"user.address\" label=\"Address\" placeholder=\"Address\" outlined></v-text-field>\r\n            <v-text-field v-model=\"user.phone\" label=\"Phone\" placeholder=\"Phone\" outlined></v-text-field>\r\n            <v-textarea\r\n              v-model=\"user.description\"\r\n              label=\"Describe yourself\"\r\n              placeholder=\"Description\"\r\n              outlined\r\n            ></v-textarea>\r\n          </v-container>\r\n          <v-btn color=\"primary\" @click=\"stepper = 2\">Continue</v-btn>\r\n          <v-btn text>Cancel</v-btn>\r\n        </v-stepper-content>\r\n        <v-stepper-content v-if=\"roleName == 'ROLE_HOST'\" step=\"2\">\r\n          <v-container>\r\n            <v-text-field\r\n              v-model=\"user.hashSecret\"\r\n              label=\"Secret Key\"\r\n              placeholder=\"Secret Key\"\r\n              outlined\r\n              type=\"password\"\r\n            ></v-text-field>\r\n            <v-text-field\r\n              v-model=\"user.tmnCode\"\r\n              label=\"Terminal ID\"\r\n              placeholder=\"Terminal ID\"\r\n              outlined\r\n            ></v-text-field>\r\n          </v-container>\r\n          <v-btn color=\"primary\" @click=\"stepper = 3\">Continue</v-btn>\r\n          <v-btn @click=\"stepper = 1\" text>Back</v-btn>\r\n        </v-stepper-content>\r\n        <v-stepper-content v-if=\"roleName == 'ROLE_HOST'\" step=\"3\">\r\n          <v-container>\r\n            <v-text-field\r\n              v-model=\"currentPassword\"\r\n              label=\"Current Password\"\r\n              placeholder=\"Current Password\"\r\n              outlined\r\n            ></v-text-field>\r\n            <v-text-field\r\n              v-model=\"newPassword\"\r\n              label=\"New Password\"\r\n              placeholder=\"New Password\"\r\n              outlined\r\n              type=\"password\"\r\n            ></v-text-field>\r\n            <v-text-field\r\n              v-model=\"confirmPassword\"\r\n              label=\"Confirm New Password\"\r\n              placeholder=\"Confirm New Password\"\r\n              outlined\r\n              type=\"password\"\r\n            ></v-text-field>\r\n          </v-container>\r\n          <v-btn color=\"primary\" v-on:click=\"updateUser\">Update</v-btn>\r\n          <v-btn @click=\"stepper = 2\" text>Back</v-btn>\r\n        </v-stepper-content>\r\n        <v-stepper-content v-else step=\"2\">\r\n          <v-container>\r\n            <v-text-field\r\n              v-model=\"currentPassword\"\r\n              label=\"Current Password\"\r\n              placeholder=\"Current Password\"\r\n              outlined\r\n            ></v-text-field>\r\n            <v-text-field\r\n              v-model=\"newPassword\"\r\n              label=\"New Password\"\r\n              placeholder=\"New Password\"\r\n              outlined\r\n              type=\"password\"\r\n            ></v-text-field>\r\n            <v-text-field\r\n              v-model=\"confirmPassword\"\r\n              label=\"Confirm New Password\"\r\n              placeholder=\"Confirm New Password\"\r\n              outlined\r\n              type=\"password\"\r\n            ></v-text-field>\r\n          </v-container>\r\n          <v-btn color=\"primary\" v-on:click=\"updateUser\">Update</v-btn>\r\n          <v-btn @click=\"stepper = 1\" text>Back</v-btn>\r\n        </v-stepper-content>\r\n      </v-stepper-items>\r\n    </v-stepper>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"profile\",\r\n  data() {\r\n    return {\r\n      user: {\r\n        userId: \"\",\r\n        username: \"\",\r\n        firstName: \"\",\r\n        lastName: \"\",\r\n        age: 0,\r\n        address: \"\",\r\n        email: \"\",\r\n        phone: \"\",\r\n        birthDay: \"\",\r\n        description: \"\",\r\n        hashSecret: \"\",\r\n        tmnCode: \"\",\r\n        avatar: \"\"\r\n      },\r\n      roleName: localStorage.getItem(\"roleName\"),\r\n      stepper: 1,\r\n      currentPassword: \"\",\r\n      newPassword: \"\",\r\n      confirmPassword: \"\"\r\n    };\r\n  },\r\n  beforeMount: function() {\r\n    let vm = this;\r\n    let userId = localStorage.getItem(\"userId\");\r\n    vm.$axios\r\n      .get(`/booking/api/v1/user/` + userId, {\r\n        headers: {\r\n          Authorization: localStorage.getItem(\"jwtToken\")\r\n        }\r\n      })\r\n      .then(response => {\r\n        if (response.data) {\r\n          vm.user = response.data;\r\n        }\r\n      })\r\n      .catch(e => {\r\n        vm.errors.push(e);\r\n      });\r\n  },\r\n  methods: {\r\n    async handleFileUpload() {\r\n      let vm = this;\r\n      const image = document.querySelector(\"#files\").files[0];\r\n      let formData = new FormData();\r\n      formData.append(\"file\", image);\r\n\r\n      await vm.$axios\r\n        .post(\r\n          `/booking/api/v1/user/` +\r\n            vm.user.userId +\r\n            \"/avatar\",\r\n          formData,\r\n          {\r\n            headers: {\r\n              Authorization: localStorage.getItem(\"jwtToken\"),\r\n              \"Content-Type\": \"multipart/form-data\"\r\n            }\r\n          }\r\n        )\r\n        .then(response => {\r\n          console.log(response.data);\r\n        })\r\n        .catch(e => {\r\n          console.log(e);\r\n        });\r\n    },\r\n    updateUser() {\r\n      let vm = this;\r\n      if (vm.currentPassword && vm.newPassword && vm.confirmPassword) {\r\n        if (vm.newPassword === vm.confirmPassword) {\r\n          let formData = new FormData();\r\n          formData.append(\"currentPassword\", vm.currentPassword);\r\n          formData.append(\"newPassword\", vm.newPassword);\r\n          formData.append(\"confirmPassword\", vm.confirmPassword);\r\n          let userId = localStorage.getItem(\"userId\");\r\n          vm.$axios\r\n            .post(\r\n              `/booking/api/v1/user/` + userId,\r\n              formData,\r\n              {\r\n                headers: {\r\n                  Authorization: localStorage.getItem(\"jwtToken\"),\r\n                  \"Content-Type\": \"multipart/form-data\"\r\n                }\r\n              }\r\n            )\r\n            .then(response => {\r\n              if (response.data.userId) {\r\n                alert(\"Change Password successfully\");\r\n              }\r\n            })\r\n            .catch(e => {\r\n              vm.errors.push(e);\r\n            });\r\n        }\r\n      }\r\n      vm.$axios\r\n        .put(`/booking/api/v1/user`, vm.user, {\r\n          headers: {\r\n            Authorization: localStorage.getItem(\"jwtToken\")\r\n          }\r\n        })\r\n        .then(response => {\r\n          if (response.data.userId) {\r\n            alert(\"Update successfully\");\r\n          }\r\n        })\r\n        .catch(e => {\r\n          vm.errors.push(e);\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}