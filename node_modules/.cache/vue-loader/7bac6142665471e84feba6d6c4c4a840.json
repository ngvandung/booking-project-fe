{"remainingRequest":"C:\\Users\\ddung\\Desktop\\booking-vue\\booking\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ddung\\Desktop\\booking-vue\\booking\\src\\views\\home\\Search.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ddung\\Desktop\\booking-vue\\booking\\src\\views\\home\\Search.vue","mtime":1592295897358},{"path":"C:\\Users\\ddung\\Desktop\\booking-vue\\booking\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ddung\\Desktop\\booking-vue\\booking\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\ddung\\Desktop\\booking-vue\\booking\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\ddung\\Desktop\\booking-vue\\booking\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ddung\\Desktop\\booking-vue\\booking\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGhvbWVzOiBbXSwNCiAgICAgIHRleHRTZWFyY2g6IHRoaXMuJHJvdXRlLnF1ZXJ5LnRleHQsDQogICAgICBmcm9tOiB0aGlzLiRyb3V0ZS5xdWVyeS5mcm9tLA0KICAgICAgdG86IHRoaXMuJHJvdXRlLnF1ZXJ5LnRvLA0KICAgICAgZ3Vlc3Q6IHRoaXMuJHJvdXRlLnF1ZXJ5Lmd1ZXN0DQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGZvcm1hdFByaWNlKHZhbHVlKSB7DQogICAgICBsZXQgdmFsID0gKHZhbHVlIC8gMSkudG9GaXhlZCgpLnJlcGxhY2UoIi4iLCAiLCIpOw0KICAgICAgcmV0dXJuIHZhbC50b1N0cmluZygpLnJlcGxhY2UoL1xCKD89KFxkezN9KSsoPyFcZCkpL2csICIuIik7DQogICAgfSwNCiAgICBjYWxsQVBJKGhvbWVJZCkgew0KICAgICAgbGV0IHZtID0gdGhpczsNCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7DQogICAgICAgIHZtLiRheGlvcw0KICAgICAgICAgIC5nZXQoDQogICAgICAgICAgICBgaHR0cDovL2xvY2FsaG9zdDo4MDgwL2Jvb2tpbmcvYXBpL3YxL2ltYWdlL2NvbS5ib29raW5nLm1vZGVsLkhvbWUvYCArDQogICAgICAgICAgICAgIGhvbWVJZA0KICAgICAgICAgICkNCiAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkgew0KICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZS5kYXRhLmRhdGEpOw0KICAgICAgICAgIH0pDQogICAgICAgICAgLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgICByZWplY3QoZXJyKTsNCiAgICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZDogZnVuY3Rpb24oKSB7DQogICAgbGV0IHZtID0gdGhpczsNCiAgICB2YXIgcXVlcnkgPSB7DQogICAgICBpbmRpY2U6ICJIb21lIiwNCiAgICAgIHF1ZXJ5OiB7DQogICAgICAgIGJvb2w6IHsNCiAgICAgICAgICBzaG91bGQ6IFsNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgbWF0Y2g6IHsNCiAgICAgICAgICAgICAgICBjaXR5TmFtZTogdm0udGV4dFNlYXJjaA0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICBtYXRjaDogew0KICAgICAgICAgICAgICAgIHN0YXRlTmFtZTogdm0udGV4dFNlYXJjaA0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICBtYXRjaDogew0KICAgICAgICAgICAgICAgIGRpc3RyaWN0TmFtZTogdm0udGV4dFNlYXJjaA0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICBtYXRjaDogew0KICAgICAgICAgICAgICAgIHZpbGxhZ2VOYW1lOiB2bS50ZXh0U2VhcmNoDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICBdLA0KICAgICAgICAgIG11c3Q6IFsNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgbWF0Y2g6IHsNCiAgICAgICAgICAgICAgICBfdHlwZTogIkhvbWUiDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgIG1hdGNoOiB7DQogICAgICAgICAgICAgICAgbWF4R3Vlc3Q6IHZtLmd1ZXN0DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgIG1hdGNoOiB7DQogICAgICAgICAgICAgICAgaXNBY3RpdmU6IDENCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIF0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH07DQogICAgdm0uJGF4aW9zDQogICAgICAucG9zdChgaHR0cDovL2xvY2FsaG9zdDo4MDgwL2Jvb2tpbmcvYXBpL3YxL19zZWFyY2hgLCBxdWVyeSkNCiAgICAgIC50aGVuKGFzeW5jIHJlc3BvbnNlID0+IHsNCiAgICAgICAgZm9yIChsZXQgaG9tZSBvZiByZXNwb25zZS5kYXRhLmhpdHMuaGl0cykgew0KICAgICAgICAgIGxldCBpbWFnZSA9IGF3YWl0IHZtLmNhbGxBUEkoaG9tZS5fc291cmNlLmhvbWVJZCk7DQogICAgICAgICAgaG9tZS5fc291cmNlLmF2dCA9ICJodHRwOi8vbG9jYWxob3N0OjgwODAvYm9va2luZy9pbWFnZXMvIiArIGltYWdlWzBdOw0KICAgICAgICAgIHZtLmhvbWVzLnB1c2goaG9tZSk7DQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICAuY2F0Y2goZXJyID0+IHsNCiAgICAgICAgY29uc29sZS5sb2coZXJyKTsNCiAgICAgIH0pOw0KICB9DQp9Ow0K"},{"version":3,"sources":["Search.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Search.vue","sourceRoot":"src/views/home","sourcesContent":["<template>\r\n  <v-item-group>\r\n    <v-container fluid>\r\n      <v-row>\r\n        <v-col v-for=\"home in homes\" :key=\"home._source.homeId\" cols=\"12\" lg=\"3\">\r\n          <router-link\r\n            style=\"text-decoration: none;\"\r\n            :to=\"{name: 'CommonHome', params: {homeId: home._source.homeId}}\"\r\n          >\r\n            <v-item>\r\n              <v-card class=\"mx-auto my-12\" max-width=\"374\">\r\n                <v-img height=\"200\" :src=\"home._source.avt\"></v-img>\r\n                <v-card-title class=\"title text-truncate\">{{home._source.name}}</v-card-title>\r\n                <v-card-text>\r\n                  <v-row align=\"center\" class=\"mx-0\">\r\n                    <v-rating :value=\"4.5\" color=\"amber\" dense half-increments readonly size=\"14\"></v-rating>\r\n                    <div class=\"grey--text ml-4\">4.5 (413)</div>\r\n                  </v-row>\r\n                  <div\r\n                    class=\"my-4 subtitle-1 font-weight-bold\"\r\n                  >{{formatPrice(home._source.price)}}$/night</div>\r\n                  <div\r\n                    class=\"text-truncate\"\r\n                  >{{home._source.villageName}}, {{home._source.districtName}}, {{home._source.cityName}}, {{home._source.stateName}}</div>\r\n                </v-card-text>\r\n                <v-divider class=\"mx-4\"></v-divider>\r\n                <v-card-text>{{home._source.maxGuest}} guests • {{home._source.livingroom}} Livingroom • {{home._source.bathroom}} Bathroom • {{home._source.bedroom}} Bedroom</v-card-text>\r\n              </v-card>\r\n            </v-item>\r\n          </router-link>\r\n        </v-col>\r\n      </v-row>\r\n    </v-container>\r\n  </v-item-group>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      homes: [],\r\n      textSearch: this.$route.query.text,\r\n      from: this.$route.query.from,\r\n      to: this.$route.query.to,\r\n      guest: this.$route.query.guest\r\n    };\r\n  },\r\n  methods: {\r\n    formatPrice(value) {\r\n      let val = (value / 1).toFixed().replace(\".\", \",\");\r\n      return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\");\r\n    },\r\n    callAPI(homeId) {\r\n      let vm = this;\r\n      return new Promise((resolve, reject) => {\r\n        vm.$axios\r\n          .get(\r\n            `http://localhost:8080/booking/api/v1/image/com.booking.model.Home/` +\r\n              homeId\r\n          )\r\n          .then(function(response) {\r\n            resolve(response.data.data);\r\n          })\r\n          .catch(err => {\r\n            reject(err);\r\n          });\r\n      });\r\n    }\r\n  },\r\n  created: function() {\r\n    let vm = this;\r\n    var query = {\r\n      indice: \"Home\",\r\n      query: {\r\n        bool: {\r\n          should: [\r\n            {\r\n              match: {\r\n                cityName: vm.textSearch\r\n              }\r\n            },\r\n            {\r\n              match: {\r\n                stateName: vm.textSearch\r\n              }\r\n            },\r\n            {\r\n              match: {\r\n                districtName: vm.textSearch\r\n              }\r\n            },\r\n            {\r\n              match: {\r\n                villageName: vm.textSearch\r\n              }\r\n            }\r\n          ],\r\n          must: [\r\n            {\r\n              match: {\r\n                _type: \"Home\"\r\n              }\r\n            },\r\n            {\r\n              match: {\r\n                maxGuest: vm.guest\r\n              }\r\n            },\r\n            {\r\n              match: {\r\n                isActive: 1\r\n              }\r\n            }\r\n          ]\r\n        }\r\n      }\r\n    };\r\n    vm.$axios\r\n      .post(`http://localhost:8080/booking/api/v1/_search`, query)\r\n      .then(async response => {\r\n        for (let home of response.data.hits.hits) {\r\n          let image = await vm.callAPI(home._source.homeId);\r\n          home._source.avt = \"http://localhost:8080/booking/images/\" + image[0];\r\n          vm.homes.push(home);\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"]}]}